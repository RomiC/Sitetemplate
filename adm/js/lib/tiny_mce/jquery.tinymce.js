(function(a){function f(){function g(a){return!!(a&&a.length&&e.tinymce&&a.is(":tinymce"))}function f(a){var b=null;a&&a.id&&e.tinymce&&(b=tinyMCE.get(a.id));return b}function d(a){var d=this,e;if(a!==b){c.call(d);d.each(function(b,c){var d;if(d=tinyMCE.get(c.id)){d.setContent(a)}})}else{if(d.length>0){if(e=tinyMCE.get(d[0].id)){return e.getContent()}}}}function c(a){if(a==="remove"){this.each(function(a,b){var c=f(b);if(c){c.remove()}})}this.find("span.mceEditor,div.mceEditor").each(function(a,b){var c=tinyMCE.get(b.id.replace(/_parent$/,""));if(c){c.remove()}})}var h={};a.each(["text","html","val"],function(c,e){var i=h[e]=a.fn[e],l=e==="text";a.fn[e]=function(c){var e=this;if(!g(e)){return i.apply(e,arguments)}if(c!==b){d.call(e.filter(":tinymce"),c);i.apply(e.not(":tinymce"),arguments);return e}else{var h="";var j=arguments;(l?e:e.eq(0)).each(function(b,c){var d=f(c);h+=d?l?d.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):d.getContent():i.apply(a(c),j)});return h}}});a.each(["append","prepend"],function(c,d){var e=h[d]=a.fn[d],i=d==="prepend";a.fn[d]=function(a){var c=this;if(!g(c)){return e.apply(c,arguments)}if(a!==b){c.filter(":tinymce").each(function(b,c){var d=f(c);d&&d.setContent(i?a+d.getContent():d.getContent()+a)});e.apply(c.not(":tinymce"),arguments);return c}}});a.each(["remove","replaceWith","replaceAll","empty"],function(b,d){var e=h[d]=a.fn[d];a.fn[d]=function(){c.call(this,d);return e.apply(this,arguments)}});h.attr=a.fn.attr;a.fn.attr=function(c,e){var i=this;if(!c||c!=="value"||!g(i)){if(e!==b){return h.attr.call(i,c,e)}else{return h.attr.call(i,c)}}if(e!==b){d.call(i.filter(":tinymce"),e);h.attr.call(i.not(":tinymce"),c,e);return i}else{var l=i[0],m=f(l);return m?m.getContent():h.attr.call(a(l),c,e)}}}var b,c,d=[],e=window;a.fn.tinymce=function(b){function o(){var c=[],d=0;if(f){f();f=null}g.each(function(a,e){var f,h=e.id,i=b.oninit;if(!h){e.id=h=tinymce.DOM.uniqueId()}f=new tinymce.Editor(h,b);c.push(f);f.onInit.add(function(){var a,b=i;g.css("visibility","");if(i){if(++d==c.length){if(tinymce.is(b,"string")){a=b.indexOf(".")===-1?null:tinymce.resolve(b.replace(/\.\w+$/,""));b=tinymce.resolve(b)}b.apply(a||tinymce,c)}}})});a.each(c,function(a,b){b.render()})}var g=this,h,i,j,k,l,m="",n="";if(!g.length){return g}if(!b){return tinyMCE.get(g[0].id)}g.css("visibility","hidden");if(!e.tinymce&&!c&&(h=b.script_url)){c=1;j=h.substring(0,h.lastIndexOf("/"));if(/_(src|dev)\.js/g.test(h)){n="_src"}k=h.lastIndexOf("?");if(k!=-1){m=h.substring(k+1)}e.tinyMCEPreInit=e.tinyMCEPreInit||{base:j,suffix:n,query:m};if(h.indexOf("gzip")!=-1){l=b.language||"en";h=h+(/\?/.test(h)?"&":"?")+"js=true&core=true&suffix="+escape(n)+"&themes="+escape(b.theme)+"&plugins="+escape(b.plugins)+"&languages="+l;if(!e.tinyMCE_GZ){tinyMCE_GZ={start:function(){function c(a){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(a))}tinymce.suffix=n;c("langs/"+l+".js");c("themes/"+b.theme+"/editor_template"+n+".js");c("themes/"+b.theme+"/langs/"+l+".js");a.each(b.plugins.split(","),function(a,b){if(b){c("plugins/"+b+"/editor_plugin"+n+".js");c("plugins/"+b+"/langs/"+l+".js")}})},end:function(){}}}}a.ajax({type:"GET",url:h,dataType:"script",cache:true,success:function(){tinymce.dom.Event.domLoaded=1;c=2;if(b.script_loaded){b.script_loaded()}o();a.each(d,function(a,b){b()})}})}else{if(c===1){d.push(o)}else{o()}}return g};a.extend(a.expr[":"],{tinymce:function(a){return!!(a.id&&tinyMCE.get(a.id))}})})(jQuery)